<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Gestion de Noticias</title>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/estilo-generales.css">

</head>
<body>
    <div class="container">

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="#">Navbar</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Link</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Dropdown
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="#">Action</a>
                            <a class="dropdown-item" href="#">Another action</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="#">Something else here</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
                    </li>
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                </form>
            </div>
        </nav>

        <br>
        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img height="400px" src="https://www.untecnicoencasa.com/wp-content/uploads/2018/05/images-1.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img height="400px" src="https://www.brandominus.com/wp-content/uploads/2015/07/meme3.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img height="400px" src="https://www.brandominus.com/wp-content/uploads/2015/07/meme5.jpg" class="d-block w-100" alt="...">
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
        <br>

        <button type="button"
                class="btn btn-primary"
                data-toggle="modal"
                data-target="#ejemplo">
            Launch demo modal
        </button>

        <!-- Modal -->
        <div class="modal fade"
             id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        ...
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>


        <div class="modal fade"
        id="ejemplo" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                    <table class="table table-hover animated slideInLeft">
                        <!-- tr -> table row -->
                        <thead>
                        <tr>
                            <!-- th -> table header -->
                            <th width="30%">Titulo</th>
                            <th width="50%">Descripción</th>
                            <th width="20%">Acciones</th>
                        </tr>
                        </thead>
                        <!-- tr -> table row -->
                        <tbody>
                        <% arreglo.forEach( (noticia)=> { %>
                            <tr>
                                <!-- td -> table detail -->
                                <td><%= noticia.titulo %></td>
                                <td><%= noticia.descripcion %></td>
                                <td>
                                    <form action="/noticia/eliminar/<%= noticia.id%>" method="POST">
                                        <!--<button type="button"> clickea sin problemas</button>-->
                                        <!--<button>Yo tambien envio informacion</button>-->
                                        <button class="btn btn-outline-danger btn-block espaciado-boton" type="submit">Eliminar</button>
                                    </form>
                                    <a class="quitar-link" href="/noticia/actualizar-noticia/<%= noticia.id %>">
                                        <button class="btn btn-outline-info btn-block espaciado-boton">Actualizar Noticia</button>
                                    </a>
                                </td>
                            </tr>
                        <% }) %>
                        </tbody>

                    </table>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>

        <br>
        <button type="button"
                class="btn btn-lg btn-danger popover-contenido"
                data-toggle="popover"
                title="MMMMM title"
                data-content="No sera de tomar un tragito"
                data-placement="bottom">Click to toggle popover</button>
        <br>

        <% const existeMensaje = typeof mensaje !== "undefined"%>

        <!--<style>-->
            <!--table, th, td {-->
                <!--border: 1px solid black;-->
                <!--border-collapse: collapse;-->
            <!--}-->
        <!--</style>-->

        <% if(existeMensaje){%>
            <div class="<%= clase%>" role="alert">
                <span class="font-weight-bold">
                    MENSAJE
                </span>: <%=mensaje%>
            </div>
        <% }%>

        <!--&lt;!&ndash; h1 -> header 1  &ndash;&gt;-->
        <!--<h1> <%= usuario %> </h1>-->
        <!--<% var jonathan = 'Paul'; %>-->
        <!--&lt;!&ndash; h2 -> header 2  &ndash;&gt;-->
        <!--<h2>  <%= jonathan %>  </h2>-->

        <% if(booleano) { %>
            <!-- p -> parrafo  -->
            <p>Usted creo una noticia</p>
        <% } %>

        <h1>Gestión de noticias</h1>
        <p>Busque, cree actualice y elimine noticias.
            Puede buscar noticias por el titulo o la descripción</p>
        <!-- ul -> unordered list  -->
        <!-- ol -> ordered list  -->
        <!--<ul>-->
        <!-- a->ancla -->

        <form>
            <div class="form-group">
                <label for="exampleInputEmail1">seleccionar paises</label>
                <select class="form-control" id="paises">
                    <option value="1">Ecuador</option>
                    <option value="2">Argentina</option>
                    <option value="3">Francia</option>
                    <option value="4">Japon</option>
                    <option value="5">Australia</option>
                </select>
            </div>

            <div class="form-group">
                <label for="exampleInputEmail1">seleccionar ciudades</label>
                <select disabled class="form-control" id="ciudades">

                </select>
            </div>
        </form>



        <form action="/noticia/inicio" method="get">
            <div class="row">
                <div class="col-sm-9">
                    <div class="form-group">
                        <label for="busqueda">Busqueda</label>
                        <input class="form-control" id="busquedaId" type="text" name="busqueda">
                    </div>
                </div>
                <div class="col-sm-3">
                    <button class="btn btn-outline-success btn-block espaciado-busqueda">Buscar</button>
                </div>
            </div>
        </form>

        <div class="row">
            <div class="col-sm-9">

            </div>
            <div class="col-sm-3">
                <a class="quitar-link" href="/noticia/crear-noticia">
                    <button class="btn btn-outline-success btn-block ">Crear Noticia</button>
                </a>
            </div>
        </div>


        <!--<% arreglo.forEach( (noticia)=> { %>-->
        <!--&lt;!&ndash; li -> list item  &ndash;&gt;-->
        <!--<li>-->
        <!--<%= noticia.titulo %>-->
        <!-- - -->
        <!--<%= noticia.descripcion %>-->
        <!--<form action="/adiosMundo" method="POST">-->
        <!--&lt;!&ndash;<button type="button"> clickea sin problemas</button>&ndash;&gt;-->
        <!--&lt;!&ndash;<button>Yo tambien envio informacion</button>&ndash;&gt;-->
        <!--<button type="submit"> Eliminar</button>-->
        <!--</form>-->
        <!--</li>-->
        <!--<% }) %>-->

        <!--</ul>-->
        <h2>Lista de noticias</h2>
        <p>Listado de las noticias, actualice o elimine noticias</p>

        <!--//true ? 'si' : 'no'-->
        <div class="scroll-table">
            <table class="table table-hover animated slideInLeft">
                <!-- tr -> table row -->
                <thead>
                <tr>
                    <!-- th -> table header -->
                    <th width="30%">Titulo</th>
                    <th width="50%">Descripción</th>
                    <th width="20%">Acciones</th>
                </tr>
                </thead>
                <!-- tr -> table row -->
                <tbody>
                <% arreglo.forEach( (noticia)=> { %>
                    <tr>
                        <!-- td -> table detail -->
                        <td><%= noticia.titulo %></td>
                        <td><%= noticia.descripcion %></td>
                        <td>
                            <form action="/noticia/eliminar/<%= noticia.id%>" method="POST">
                                <!--<button type="button"> clickea sin problemas</button>-->
                                <!--<button>Yo tambien envio informacion</button>-->
                                <button class="btn btn-outline-danger btn-block espaciado-boton" type="submit">Eliminar</button>
                            </form>
                            <a class="quitar-link" href="/noticia/actualizar-noticia/<%= noticia.id %>">
                                <button class="btn btn-outline-info btn-block espaciado-boton">Actualizar Noticia</button>
                            </a>
                        </td>
                    </tr>
                <% }) %>
                </tbody>

            </table>
        </div>

        <script>
            function imprimirEnConsola(evento) {
                evento.preventDefault();
                console.log('ASDASDAS');
            }
        </script>
    </div>


    <script src="/js/jquery.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/bootstrap/js/bootstrap.js"></script>

    <script>
        $(function () {
            $('.popover-contenido').popover({
                container: 'body'
            })
        })

        //Http

        //Escuchar los cambios SELECT paises
        const etiquetaSelectPaises = document.getElementById("paises");
        const etiquetaSelectCiudades = document.getElementById("ciudades");
        let valorActualPais = etiquetaSelectPaises.value;
        const ciudades = [
            {
                idPais: 1,
                nombre: 'Quito',
                id:1
            },
            {
                idPais: 2,
                nombre: 'Buenos Aires',
                id:2
            },
            {
                idPais: 3,
                nombre: 'Paris',
                id:3
            },
            {
                idPais: 4,
                nombre: 'Tokyo',
                id:4

            },
            {
                idPais: 5,
                nombre: 'Sidney',
                id:5
            },
        ]
        etiquetaSelectPaises.onchange = (evento)=>{
            valorActualPais = etiquetaSelectPaises.value;
            console.log('Valor actual del pais', valorActualPais);

            //HTTP -> pedir a nuestro controlador un json con las ciudades del pais
            const ciudadesEncontradas = ciudades
                .filter(
                    (ciudad)=>{
                        return ciudad.idPais === +valorActualPais;
                    }
                )
            console.log(ciudadesEncontradas);
            etiquetaSelectCiudades.disabled = false;
        }

        //-> Traer las ciudades con ese id
        // http -> GET paisID = 1
        // http -> GET paisID = 2
        // http -> GET paisID = 3

        // Popular el select de ciudades



    </script>
</body>
</html>